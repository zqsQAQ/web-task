{"remainingRequest":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\src\\views\\fine\\payFineAdmin.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\src\\views\\fine\\payFineAdmin.vue","mtime":1654669833684},{"path":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\LIBRARY\\itmk-base-parent\\itmk-base-web\\src\\main\\resources\\boot-project-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBhbGlQYXlBcGksDQogIGdldEZpbmVMaXN0QXBpLA0KICBnZXRBbGlQYXlBcGksDQogIHBheUZpbmVBcGksDQp9IGZyb20gIkAvYXBpL2ZpbmUiOw0KaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsNCmltcG9ydCB7IGdldFVzZXJJZCB9IGZyb20gIkAvdXRpbHMvYXV0aCI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICB0YWJsZUhlaWdodDogMCwNCiAgICAgIC8v6LCD55So5o6l5Y+j5Lyg6YCS55qE5Y+C5pWwDQogICAgICBwYXlQYXJtOiB7DQogICAgICAgIG1lcmNoYW50VXNlcklkOiBnZXRVc2VySWQoKSwNCiAgICAgICAgbWVyY2hhbnRPcmRlcklkOiAiIiwNCiAgICAgICAgdG90YWxfYW1vdW50OiAiIiwNCiAgICAgIH0sDQogICAgICAvL+iwg+eUqOaOpeWPo+i/lOWbnueahOS7o+eggQ0KICAgICAgcGF5Q29kZTogIiIsDQogICAgICAvL+iwg+eUqOe9muasvuWIl+ihqOaOpeWPo+S8oOmAkueahOWPguaVsA0KICAgICAgbGlzdFBhcm06IHsNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgcmVhZGVySWQ6IGdldFVzZXJJZCgpLA0KICAgICAgICBmaW5lVHlwZTogIiIsDQogICAgICAgIGZpbmVTdGF0dXM6ICIiLA0KICAgICAgICB1c2VybmFtZToiIiwNCiAgICAgICAgLy8gYm9va05hbWU6IiINCiAgICAgIH0sDQogICAgICBzdGF0dXNPcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogIjAiLA0KICAgICAgICAgIGxhYmVsOiAidW5wYWlkIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAiMSIsDQogICAgICAgICAgbGFiZWw6ICJwYWlkIiwNCiAgICAgICAgfSwNCiAgICAgIF0sDQogICAgICB0eXBlT3B0aW9uczogWw0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6IDAsDQogICAgICAgICAgbGFiZWw6ICJvdmVyZHVlIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAxLA0KICAgICAgICAgIGxhYmVsOiAiZGFtYWdlZCBvciBsb3N0IiwNCiAgICAgICAgfSwNCiAgICAgIF0sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICB0aGlzLnRhYmxlSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0IC0gMTcwOw0KICAgIH0pOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy/mlK/ku5jmjInpkq4NCiAgICBhc3luYyBwYXlCdG4ocm93KSB7DQogICAgICBjb25zb2xlLmxvZygiZmluZUlkLi4uLi4uLi4uLi4uIiArIHJvdy5maW5lSWQpOw0KICAgICAgbGV0IHBhcm0gPSB7DQogICAgICAgIGZpbmVJZDogcm93LmZpbmVJZCwNCiAgICAgIH07DQogICAgICAvLyBhd2FpdCBwYXlGaW5lQXBpKHtmaW5lSWQ6cm93LmZpbmVJZH0pOw0KICAgICAgLy8gYXdhaXQgcGF5RmluZUFwaShyb3cuZmluZUlkKTsNCiAgICAgIGF3YWl0IHBheUZpbmVBcGkocGFybSk7DQogICAgICAvLyB0aGlzLmxpc3RQYXJtLmZpbmVTdGF0dXMgPSAxOw0KICAgICAgLy8gdGhpcy5nZXRMaXN0KCk7DQogICAgICAvLyB0aGlzLnBheVBhcm0ubWVyY2hhbnRPcmRlcklkID0gbmV3IERhdGUoKTsNCiAgICAgIHRoaXMucGF5UGFybS5tZXJjaGFudE9yZGVySWQgPSByb3cuYm9ycm93SWQ7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBheVBhcm0ubWVyY2hhbnRPcmRlcklkKTsNCiAgICAgIHRoaXMucGF5UGFybS50b3RhbF9hbW91bnQgPSByb3cuZmluZUZlZTsNCiAgICAgIHRoaXMucGF5Q29kZSA9IGF3YWl0IGFsaVBheUFwaSh0aGlzLnBheVBhcm0pOw0KICAgICAgLy8gbGV0IHJlcyA9IGF3YWl0IGdldEFsaVBheUFwaSgpOw0KICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGF5Q29kZSk7DQogICAgICAkKCIjbXlkaXYiKS5hcHBlbmQodGhpcy5wYXlDb2RlLmRhdGEpOw0KICAgIH0sDQogICAgLy/ojrflj5bnvZrmrL7liJfooagNCiAgICBhc3luYyBnZXRMaXN0KCkgew0KICAgICAgbGV0IHJlcyA9IGF3YWl0IGdldEZpbmVMaXN0QXBpKHRoaXMubGlzdFBhcm0pOw0KICAgICAgaWYgKHJlcyAmJiByZXMuY29kZSA9PSAyMDApIHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEucmVjb3Jkcyk7DQogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEucmVjb3JkczsNCiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy50YWJsZURhdGEpOw0KICAgICAgICB0aGlzLmxpc3RQYXJtLnRvdGFsID0gcmVzLmRhdGEudG90YWw7DQogICAgICB9DQogICAgfSwNCiAgICBjdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5saXN0UGFybS5jdXJyZW50UGFnZSA9IHZhbDsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgc2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMubGlzdFBhcm0ucGFnZVNpemUgPSB2YWw7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICAgIHNlYXJjaEJ0bigpIHsNCiAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgIH0sDQogICAgcmVzZXRCdG4oKSB7DQogICAgICAvL+a4heepuuaQnOe0ouagjw0KICAgICAgLy8gdGhpcy5saXN0UGFybS5ib29rTmFtZSA9ICIiOw0KICAgICAgdGhpcy5saXN0UGFybS5maW5lVHlwZSA9ICIiOw0KICAgICAgdGhpcy5saXN0UGFybS5maW5lU3RhdHVzID0gIiI7DQogICAgICB0aGlzLmxpc3RQYXJtLnVzZXJuYW1lID0gIiI7DQogICAgICB0aGlzLmdldExpc3QoKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["payFineAdmin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"payFineAdmin.vue","sourceRoot":"src/views/fine","sourcesContent":["<template>\r\n  <el-main>\r\n    <div id=\"mydiv\"></div>\r\n    <el-form :model=\"listParm\" label-width=\"150px\" :inline=\"true\" size=\"mini\">\r\n      <!-- <el-form-item label=\"book\">\r\n        <el-input v-model=\"listParm.bookName\"></el-input>\r\n      </el-form-item> -->\r\n      <el-form-item label=\"student ID\">\r\n        <el-input\r\n          v-model=\"listParm.username\"\r\n          placeholder=\"please enter student ID\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"fine type\">\r\n        <el-select v-model=\"listParm.fineType\" placeholder=\"please select\">\r\n          <el-option\r\n            v-for=\"item in typeOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"fine status\">\r\n        <el-select v-model=\"listParm.fineStatus\" placeholder=\"please select\">\r\n          <el-option\r\n            v-for=\"item in statusOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button icon=\"el-icon-search\" @click=\"searchBtn\">search</el-button>\r\n        <el-button style=\"color: #ff7670\" icon=\"el-icon-close\" @click=\"resetBtn\"\r\n          >reset</el-button\r\n        >\r\n      </el-form-item>\r\n      \r\n    </el-form>\r\n    <!-- 表格 -->\r\n    <el-table\r\n      ref=\"tables\"\r\n      :height=\"tableHeight\"\r\n      :data=\"tableData\"\r\n      border\r\n      stripe\r\n    >\r\n      <!-- <el-table-column type=\"selection\" width=\"55\"> </el-table-column> -->\r\n      <el-table-column prop=\"borrowId\" label=\"borrowId\"> </el-table-column>\r\n      <el-table-column prop=\"username\" label=\"username\"> </el-table-column>\r\n      <el-table-column prop=\"bookName\" label=\"bookName\"> </el-table-column>\r\n      <el-table-column prop=\"barcode\" label=\"barcode\"> </el-table-column>\r\n      <el-table-column prop=\"fineFee\" label=\"fineFee\"> </el-table-column>\r\n      <el-table-column prop=\"fineType\" label=\"fineType\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag v-if=\"scope.row.fineType == 0\">overdue</el-tag>\r\n          <el-tag type=\"danger\" v-if=\"scope.row.fineType == 1\"\r\n            >damaged or lost</el-tag\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"fineStatus\" label=\"fineStatus\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag v-if=\"scope.row.fineStatus == '0'\" type=\"danger\"\r\n            >unpaid</el-tag\r\n          >\r\n          <el-tag type=\"success\" v-if=\"scope.row.fineStatus == '1'\"\r\n            >paid</el-tag\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n      <!-- <el-table-column label=\"operation\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"payBtn(scope.row)\" v-if=\"scope.row.fineStatus == '0'\"\r\n            >pay</el-button\r\n          >\r\n        </template>\r\n      </el-table-column> -->\r\n\r\n      <!-- <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"success\"\r\n            size=\"small\"\r\n            icon=\"el-icon-eleme\"\r\n            @click=\"codeBtn(scope.row)\"\r\n            >Code</el-button\r\n          >\r\n\r\n        </template> -->\r\n    </el-table>\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n      @size-change=\"sizeChange\"\r\n      @current-change=\"currentChange\"\r\n      :current-page.sync=\"listParm.currentPage\"\r\n      :page-sizes=\"[10, 20, 40, 80, 100]\"\r\n      :page-size=\"listParm.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"listParm.total\"\r\n      background\r\n    >\r\n    </el-pagination>\r\n  </el-main>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  aliPayApi,\r\n  getFineListApi,\r\n  getAliPayApi,\r\n  payFineApi,\r\n} from \"@/api/fine\";\r\nimport $ from \"jquery\";\r\nimport { getUserId } from \"@/utils/auth\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      tableHeight: 0,\r\n      //调用接口传递的参数\r\n      payParm: {\r\n        merchantUserId: getUserId(),\r\n        merchantOrderId: \"\",\r\n        total_amount: \"\",\r\n      },\r\n      //调用接口返回的代码\r\n      payCode: \"\",\r\n      //调用罚款列表接口传递的参数\r\n      listParm: {\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n        readerId: getUserId(),\r\n        fineType: \"\",\r\n        fineStatus: \"\",\r\n        username:\"\",\r\n        // bookName:\"\"\r\n      },\r\n      statusOptions: [\r\n        {\r\n          value: \"0\",\r\n          label: \"unpaid\",\r\n        },\r\n        {\r\n          value: \"1\",\r\n          label: \"paid\",\r\n        },\r\n      ],\r\n      typeOptions: [\r\n        {\r\n          value: 0,\r\n          label: \"overdue\",\r\n        },\r\n        {\r\n          value: 1,\r\n          label: \"damaged or lost\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.tableHeight = window.innerHeight - 170;\r\n    });\r\n  },\r\n  methods: {\r\n    //支付按钮\r\n    async payBtn(row) {\r\n      console.log(\"fineId............\" + row.fineId);\r\n      let parm = {\r\n        fineId: row.fineId,\r\n      };\r\n      // await payFineApi({fineId:row.fineId});\r\n      // await payFineApi(row.fineId);\r\n      await payFineApi(parm);\r\n      // this.listParm.fineStatus = 1;\r\n      // this.getList();\r\n      // this.payParm.merchantOrderId = new Date();\r\n      this.payParm.merchantOrderId = row.borrowId;\r\n      console.log(this.payParm.merchantOrderId);\r\n      this.payParm.total_amount = row.fineFee;\r\n      this.payCode = await aliPayApi(this.payParm);\r\n      // let res = await getAliPayApi();\r\n      // console.log(res);\r\n      console.log(this.payCode);\r\n      $(\"#mydiv\").append(this.payCode.data);\r\n    },\r\n    //获取罚款列表\r\n    async getList() {\r\n      let res = await getFineListApi(this.listParm);\r\n      if (res && res.code == 200) {\r\n        console.log(res.data.records);\r\n        this.tableData = res.data.records;\r\n        // console.log(this.tableData);\r\n        this.listParm.total = res.data.total;\r\n      }\r\n    },\r\n    currentChange(val) {\r\n      this.listParm.currentPage = val;\r\n      this.getList();\r\n    },\r\n    sizeChange(val) {\r\n      this.listParm.pageSize = val;\r\n      this.getList();\r\n    },\r\n    searchBtn() {\r\n      this.getList();\r\n    },\r\n    resetBtn() {\r\n      //清空搜索栏\r\n      // this.listParm.bookName = \"\";\r\n      this.listParm.fineType = \"\";\r\n      this.listParm.fineStatus = \"\";\r\n      this.listParm.username = \"\";\r\n      this.getList();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}